@startuml Context
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

AddRelTag("validate", $textColor="orange", $lineColor="Blue", $lineStyle = DashedLine())
AddRelTag("download", $textColor="orange", $lineColor="Blue", $lineStyle)


Person(admin, "Admin", "Repository Manager")
Person(maintainer, "Maintainer", "Manage Projects")
Person(user, "User")

System(repository, "Repository Metadata", "Signed Metadata")
System(automation, "CI/CD, Artifact Systems", "Third part sofware") #Grey
System(files_repository, "Repository", "Targets") #Blue

Rel_R(admin, repository, "CLI/API", "", "- Bootstrap Ceremony\n- Manage Keys\n- Repository Operations")
Rel(maintainer, repository, "CLI/API", "", "- Add/Remove targets\n- Manage maintainers\n- Project tokens")
Rel_R(maintainer, automation, "Manage Automations", "Pipelines, Integrations")
Rel(automation, repository, "API")
Rel(automation, files_repository, "Upload file")
Rel_U(user, repository, "1", "Validate Target", "Validate target", $tags="validate")
Rel_U(user, files_repository, "2", "Download targets rquest", "Install, Download Update targets", $tags="download")
Rel_R(repository, files_repository, "Add [Optional] files")

SHOW_LEGEND()
@enduml